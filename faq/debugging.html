
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.0.1">
    
    
      
        <title>How can I debug models when things go wrong? - Dymos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.38780c08.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f72e892.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-can-i-debug-models-when-things-go-wrong" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Dymos" class="md-header-nav__button md-logo" aria-label="Dymos">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Dymos
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              How can I debug models when things go wrong?
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dymos" class="md-nav__button md-logo" aria-label="Dymos">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Dymos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/collocation.html" title="What is collocation?" class="md-nav__link">
      What is collocation?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/optimal_control.html" title="Optimal Control" class="md-nav__link">
      Optimal Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/defining_odes.html" title="Defining ODEs" class="md-nav__link">
      Defining ODEs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/intro_to_dymos/intro_ivp.html" title="Modeling Dynamic Systems with Dymos" class="md-nav__link">
      Modeling Dynamic Systems with Dymos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/intro_to_dymos/intro_segments.html" title="Segments of Phases" class="md-nav__link">
      Segments of Phases
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Examples and Tutorials
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Examples and Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Examples and Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/examples.html" title="Dymos by Example" class="md-nav__link">
      Dymos by Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Example Problems
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Example Problems" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon"></span>
        Example Problems
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/brachistochrone/brachistochrone.html" title="The Brachistochrone" class="md-nav__link">
      The Brachistochrone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/vanderpol/vanderpol.html" title="The Van der Pol Oscillator" class="md-nav__link">
      The Van der Pol Oscillator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/commercial_aircraft/commercial_aircraft.html" title="Commercial Aircraft Range Maximization by Differential Inclusion" class="md-nav__link">
      Commercial Aircraft Range Maximization by Differential Inclusion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/double_integrator/double_integrator.html" title="Double Integrator" class="md-nav__link">
      Double Integrator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/hypersensitive/hypersensitive.html" title="Hyper-Sensitive Problem" class="md-nav__link">
      Hyper-Sensitive Problem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/finite_burn_orbit_raise/finite_burn_orbit_raise.html" title="Two-Burn Orbit Raise" class="md-nav__link">
      Two-Burn Orbit Raise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/length_constrained_brachistochrone/length_constrained_brachistochrone.html" title="The Length-Constrained Brachistochrone" class="md-nav__link">
      The Length-Constrained Brachistochrone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/min_time_climb/min_time_climb.html" title="Supersonic Interceptor Minimum Time Climb" class="md-nav__link">
      Supersonic Interceptor Minimum Time Climb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/multi_phase_cannonball/multi_phase_cannonball.html" title="Multi-Phase Cannonball" class="md-nav__link">
      Multi-Phase Cannonball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/multibranch_trajectory/multibranch_trajectory.html" title="Multibranch Trajectory" class="md-nav__link">
      Multibranch Trajectory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/reentry/reentry.html" title="Single-Phase Space Shuttle Reentry" class="md-nav__link">
      Single-Phase Space Shuttle Reentry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/ssto_earth/ssto_earth.html" title="SSTO Earth Launch" class="md-nav__link">
      SSTO Earth Launch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/ssto_moon_linear_tangent/ssto_moon_linear_tangent.html" title="SSTO Lunar Ascent with Linear Tangent Guidance" class="md-nav__link">
      SSTO Lunar Ascent with Linear Tangent Guidance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/ssto_moon_polynomial_controls/ssto_moon_polynomial_controls.html" title="SSTO Lunar Ascent with Polynomial Controls" class="md-nav__link">
      SSTO Lunar Ascent with Polynomial Controls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/water_rocket/water_rocket.html" title="Water Rocket" class="md-nav__link">
      Water Rocket
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Feature Reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Feature Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Feature Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Phases
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Phases" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon"></span>
        Phases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/phases.html" title="Phases of a Trajectory" class="md-nav__link">
      Phases of a Trajectory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/segments.html" title="Segments" class="md-nav__link">
      Segments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/variables.html" title="Variables" class="md-nav__link">
      Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/constraints.html" title="Constraints" class="md-nav__link">
      Constraints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/objective.html" title="Objective" class="md-nav__link">
      Objective
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/phases/timeseries.html" title="Timeseries Outputs" class="md-nav__link">
      Timeseries Outputs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Trajectories
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Trajectories" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon"></span>
        Trajectories
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../features/trajectories/trajectories.html" title="Organizing Phases into Trajectories" class="md-nav__link">
      Organizing Phases into Trajectories
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../features/exploiting_sparsity.html" title="Exploiting Sparsity for Faster Derivative Calculation" class="md-nav__link">
      Exploiting Sparsity for Faster Derivative Calculation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Frequently Asked Questions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Frequently Asked Questions" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Frequently Asked Questions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="add_ode_output_to_timeseries.html" title="How do I add an ODE output to the timeseries outputs?" class="md-nav__link">
      How do I add an ODE output to the timeseries outputs?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="connect_scalar_parameters_to_ode.html" title="How do I connect a scalar input to the ODE?" class="md-nav__link">
      How do I connect a scalar input to the ODE?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="upstream_analysis.html" title="How do connect the outputs of an upstream analysis as inputs to Dymos?" class="md-nav__link">
      How do connect the outputs of an upstream analysis as inputs to Dymos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="downstream_analysis.html" title="How do connect the outputs of Dymos to a downstream analysis?" class="md-nav__link">
      How do connect the outputs of Dymos to a downstream analysis?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tandem_phases.html" title="How do I run two phases parallel-in-time?" class="md-nav__link">
      How do I run two phases parallel-in-time?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="use_partial_coloring.html" title="How can I more efficiently use finite-differenced components in the ODE?" class="md-nav__link">
      How can I more efficiently use finite-differenced components in the ODE?
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        How can I debug models when things go wrong?
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="debugging.html" title="How can I debug models when things go wrong?" class="md-nav__link md-nav__link--active">
      How can I debug models when things go wrong?
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-n2-viewer" class="md-nav__link">
    The N2 Viewer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-example-of-an-n2-of-a-dymos-model" class="md-nav__link">
    An example of an N2 of a Dymos model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-debug_print" class="md-nav__link">
    Using debug_print
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Dymos API Reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Dymos API Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Dymos API Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/run_problem.html" title="The Dymos run_problem function" class="md-nav__link">
      The Dymos run_problem function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/phase_api.html" title="The Phase API" class="md-nav__link">
      The Phase API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/trajectory_api.html" title="The Trajectory API" class="md-nav__link">
      The Trajectory API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Command Line Interface
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Command Line Interface" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Command Line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../command_line/command_line.html" title="Dymos Command Line Interface" class="md-nav__link">
      Dymos Command Line Interface
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Release Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../release_notes/version_0.16.0.html" title="dymos 0.16.0" class="md-nav__link">
      dymos 0.16.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Contributing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contributing" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/contributing.html" title="Contributing to Dymos" class="md-nav__link">
      Contributing to Dymos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-n2-viewer" class="md-nav__link">
    The N2 Viewer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-example-of-an-n2-of-a-dymos-model" class="md-nav__link">
    An example of an N2 of a Dymos model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-debug_print" class="md-nav__link">
    Using debug_print
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="how-can-i-debug-models-when-things-go-wrong">How can I debug models when things go wrong?<a class="headerlink" href="#how-can-i-debug-models-when-things-go-wrong" title="Permanent link">&para;</a></h1>
<p>Dymos allow the user to build complex optimization models that include dynamic behavior.
Managing that complexity can be a challenge as models grow larger.
In this section we'll talk about some tools that can help when things are going as expected.</p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>If you look at the dymos source code, a considerable portion of it is used for testing.
We strongly recommend that you develop tests of your models, from testing that the most basic components work as expected, to testing integrated systems with nonlinear solvers.
In most cases these tests consist of these steps:</p>
<ol>
<li>Instantiate an OpenMDAO Problem</li>
<li>Add your model.</li>
<li>Setup the problem.</li>
<li>Set the model inputs.</li>
<li>Call <code>run_model()</code></li>
<li>Check the outputs against known values.</li>
<li>Run <code>problem.check_partials()</code> to verify that the analytic partials are reasonably close to finite-difference or complex-step results.</li>
</ol>
<p>For example, the tests for the <code>kappa_comp</code> in the minimum time-to-climb model looks like this:</p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">test_kappa_comp.py</label><div class="tabbed-content"></div>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">openmdao.api</span> <span class="k">as</span> <span class="nn">om</span>
<span class="kn">from</span> <span class="nn">openmdao.utils.assert_utils</span> <span class="kn">import</span> <span class="n">assert_check_partials</span><span class="p">,</span> <span class="n">assert_near_equal</span>
<span class="kn">from</span> <span class="nn">dymos.examples.min_time_climb.aero.kappa_comp</span> <span class="kn">import</span> <span class="n">KappaComp</span>


<span class="k">class</span> <span class="nc">TestKappaComp</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">Problem</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_subsystem</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;kappa_comp&#39;</span><span class="p">,</span> <span class="n">subsys</span><span class="o">=</span><span class="n">KappaComp</span><span class="p">(</span><span class="n">num_nodes</span><span class="o">=</span><span class="n">n</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">set_val</span><span class="p">(</span><span class="s1">&#39;kappa_comp.mach&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">run_model</span><span class="p">()</span>

        <span class="n">M</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get_val</span><span class="p">(</span><span class="s1">&#39;kappa_comp.mach&#39;</span><span class="p">)</span>
        <span class="n">kappa</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get_val</span><span class="p">(</span><span class="s1">&#39;kappa_comp.kappa&#39;</span><span class="p">)</span>

        <span class="n">idxs_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">M</span> <span class="o">&lt;=</span> <span class="mf">1.15</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">idxs_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">M</span> <span class="o">&gt;</span> <span class="mf">1.15</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">kappa_analtic_0</span> <span class="o">=</span> <span class="mf">0.54</span> <span class="o">+</span> <span class="mf">0.15</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">((</span><span class="n">M</span><span class="p">[</span><span class="n">idxs_0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.9</span><span class="p">)</span><span class="o">/</span><span class="mf">0.06</span><span class="p">))</span>
        <span class="n">kappa_analtic_1</span> <span class="o">=</span> <span class="mf">0.54</span> <span class="o">+</span> <span class="mf">0.15</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="mf">0.25</span><span class="o">/</span><span class="mf">0.06</span><span class="p">))</span> <span class="o">+</span> <span class="mf">0.14</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="p">[</span><span class="n">idxs_1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.15</span><span class="p">)</span>

        <span class="n">assert_near_equal</span><span class="p">(</span><span class="n">kappa</span><span class="p">[</span><span class="n">idxs_0</span><span class="p">],</span> <span class="n">kappa_analtic_0</span><span class="p">)</span>
        <span class="n">assert_near_equal</span><span class="p">(</span><span class="n">kappa</span><span class="p">[</span><span class="n">idxs_1</span><span class="p">],</span> <span class="n">kappa_analtic_1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_partials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">Problem</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">om</span><span class="o">.</span><span class="n">Group</span><span class="p">())</span>
        <span class="n">p</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_subsystem</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;kappa_comp&#39;</span><span class="p">,</span> <span class="n">subsys</span><span class="o">=</span><span class="n">KappaComp</span><span class="p">(</span><span class="n">num_nodes</span><span class="o">=</span><span class="n">n</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">set_val</span><span class="p">(</span><span class="s1">&#39;kappa_comp.mach&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">p</span><span class="o">.</span><span class="n">run_model</span><span class="p">()</span>
        <span class="n">cpd</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">check_partials</span><span class="p">(</span><span class="n">compact_print</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">out_stream</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">assert_check_partials</span><span class="p">(</span><span class="n">cpd</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1.0E-5</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1.0E-4</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>This consists of two separate tests: one that tests results, and one that tests the partials against finite-differencing.
OpenMDAO includes a useful <code>assert_check_partials</code> method that can be used to programmatically verify accurate partials in automated testing.</p>
<h2 id="the-n2-viewer">The N2 Viewer<a class="headerlink" href="#the-n2-viewer" title="Permanent link">&para;</a></h2>
<p>When complex models don't output the correct value and the compute method has been double-checked, an incorrect or non-existent connection is frequently to blame.
The goto tool for checking to see if models are correctly connected is <a href="http://openmdao.org/twodocs/versions/latest/features/model_visualization/n2_details.html">OpenMDAO's N-squared (N2) viewer</a>.
This tool provides information about how models are connected and lets the user know when inputs aren't connected to an output as expected.</p>
<p>It can be invoked from a run script using</p>
<div class="highlight"><pre><span></span><code><span class="n">om</span><span class="o">.</span><span class="n">n2</span><span class="p">(</span><span class="n">problem</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>

<p>or from the command line using</p>
<div class="highlight"><pre><span></span><code>openmdao n2 file.py
</code></pre></div>

<p>where file.py is the file that contains an instantiated OpenMDAO Problem.</p>
<h2 id="an-example-of-an-n2-of-a-dymos-model">An example of an N2 of a Dymos model<a class="headerlink" href="#an-example-of-an-n2-of-a-dymos-model" title="Permanent link">&para;</a></h2>
<p>Coming soon</p>
<h2 id="using-debug_print">Using <code>debug_print</code><a class="headerlink" href="#using-debug_print" title="Permanent link">&para;</a></h2>
<p>Coming soon</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="use_partial_coloring.html" title="How can I more efficiently use finite-differenced components in the ODE?" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How can I more efficiently use finite-differenced components in the ODE?
              </div>
            </div>
          </a>
        
        
          <a href="../api/run_problem.html" title="The Dymos run_problem function" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                The Dymos run_problem function
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.77e55a48.min.js"></script>
      <script src="../assets/javascripts/bundle.aa3f9871.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>